"use strict";(self.webpackChunkquiz_game_new=self.webpackChunkquiz_game_new||[]).push([[462],{1462:(t,e,n)=>{n.r(e),n.d(e,{initFormComponents:()=>V});var i=n(1597),s=n(5745),a=n(3845),l=n(6117),o=n(2048),r=n(3658);const c=i.ow.group;function d(){const t=c.value.trim(),{EMPTY_INPUT:e,GROUP_ALREADY_EXISTS:n}=o.dc;t?s.T.groups.includes(t)?(0,o.KB)(c,n(t)):(0,o.TK)(c):(0,o.KB)(c,e)}function u(){const t=c.value.trim(),e=(0,l.Pj)(t);(0,r.vX)(e,(()=>function(t){s.T.addGroup(t),s.T.save(),(0,r.Fx)(i.ow),(0,a.K)()}(t)))}function h(t){(0,r.mv)(t.target,u)}function p(){const t=(0,r.ZN)(i.wT.groups),e=(0,l.XD)(t);(0,r.vX)(e,(()=>function(t){s.T.removeGroup(t),s.T.print(),s.T.save(),(0,r.Fx)(i.wT),(0,a.K)()}(t)))}function m(t){(0,r.mv)(t.target,p)}const{EMPTY_INPUT:f,CONTAINS_COMMA:g,SAME_INPUT_VALUES:v}=o.vG;function _(t){const e=[t.word,...t.querySelectorAll('[name="translate"]')],n=e.map((t=>t.value)).filter(Boolean).reduce(((t,e)=>(t[e]=t[e]+1||1,t)),{});e.forEach((t=>function(t,e){const n=t.value.trim(),i=t.form.word,s="word"===t.name;n?n.includes(",")?(0,o.KB)(t,g(s)):e>1?(0,o.KB)(t,v(i.value===n)):(0,o.TK)(t):(0,o.KB)(t,f(s))}(t,n[t.value])))}const E={id:1,count:1},T=document.querySelector("#add-translate-reset"),L=document.querySelector(".additional__translates-container");function S(){const t=i.O_.querySelector('[name="translate"]');E.id=1,E.count=1,(0,r.TL)(t),(0,o.zS)(i.O_,"[data-reset]"),(0,r.yy)(L),(0,r.G9)(E.count)}function A(){const t=i.O_.word,e=i.O_.querySelectorAll('[name="translate"]'),n=i.O_.groups,o=t.value.trim(),c=Array.from(e,(t=>t.value.trim())),d=(0,r.ZN)(n).trim(),u=(0,l.ib)(o,c,d);(0,r.vX)(u,(()=>{s.T.addOne({word:o,translates:c,group:d}),s.T.print(),s.T.save(),(0,r.Fx)(i.O_),(0,a.K)()}))}function w(t){"text"===t.target.type&&_(i.O_)}function y(t){(0,r.mv)(t.target,A)}T.addEventListener("click",(function(){(0,r.vX)(l.L0,S)}));const b=document.querySelector(".additional__translates-container");function O(){const t=E.id+1,e=`\n        <label class='form__label row' data-delete-id="${t}">\n            <div class='input-delete__container'>\n                <i class='input-delete fa fa-trash' aria-hidden='true' data-delete-id='${t}'></i>\n            </div>\n            <input type='text' class='text-input' name='translate' placeholder='Переклад' maxlength='40' required>\n            <small class='feedbacks'>\n                <span class='feedback valid'>Переклад введено правильно!</span>\n                <span class='feedback invalid' data-default-feedback='Введіть переклад!'>Введіть переклад!</span>\n            </small>\n        </label>\n    `;E.id++,E.count++,b.insertAdjacentHTML("beforeend",e),b.lastElementChild.focus(),(0,r.G9)(E.count)}const C=document.querySelector(".translates__container");function x(t){t.target.classList.contains("input-delete")&&function(t){(0,r.vX)(l.cj,(()=>{var e;e=t.target.dataset.deleteId,i.O_.querySelector(`[data-delete-id='${e}']`).remove(),E.count--,(0,r.G9)(E.count),_(i.O_)}))}(t)}var N=n(8051);const F=function(){i.O_.addEventListener("input",(0,r.Ds)(w,100)),i.O_.addEventListener("submit",y),i.O_.addEventListener("reset",S),document.querySelector("#add-translate").addEventListener("click",O),C.addEventListener("click",x),(0,N.H)()};function Z(){s.T.isEmpty()||(s.T.clear(),(0,a.K)())}function I(){(0,r.vX)(l.ft,Z)}function q(t){(0,r.mv)(t.target,I)}const M=async()=>{const t=await(0,r.xu)("import-templates/text.txt"),{text:e,separator:n}=(t=>{const e=(0,r.ZN)(i.Z$.separators);return{separator:e,text:t.replaceAll("&",e)}})(t),s=`*** Це шаблон коректного словника з вибраним роздільником ${n}\n*** Якщо хочете завантажити цей шаблон у словник, то видаліть текст із зірочками на початку\n*** [слово] ${n} [переклад1], [переклад2], ...\n${e}`;(0,r.WH)("template",s)};class R{constructor(t,e){this.input=t,this.label=e,this.setInvalid()}setValid(t="Все добре!"){(0,o.TK)(this.input,t,this.label.nextElementSibling),this.label.classList.replace("invalid","valid")}setInvalid(t="Завантажте текстовий файл!"){(0,o.KB)(this.input,t,this.label.nextElementSibling),this.label.classList.replace("valid","invalid")}reset(t){(0,r.TL)(this.input),this.setInvalid(t)}resetConfirm(t){(0,r.vX)(l.Wx,t)}}class D{constructor(t){this.container=t,this.title=this.container.querySelector(".title"),this.content=this.container.querySelector(".content"),this.content.style.height=0}hide(){this.container.classList.add("hidden"),this.slideUp()}show(){this.container.classList.remove("hidden")}isOpen(){return this.container.classList.contains("open")}slideToggle(){this.isOpen()?this.slideUp():this.slideDown()}slideDown(){if(!this.content.children.length)return;this.container.classList.add("open");const t=`${this.#t()}px`;this.content.style.height=t,this.content.animate([{height:0},{height:t}],{duration:this.#e()})}slideUp(){this.container.classList.remove("open"),this.content.style.height=0,this.content.animate([{height:`${this.#t()}px`},{height:0}],{duration:this.#e()})}#t(){const t=this.content.children,e=t.length;return e?t[0].offsetHeight*e:0}#e(){return 300+this.#t()/(this.content.children.length+1)}}class $ extends R{constructor(t,e){super(t,e),this.#n()}incrementFilesCount(){const t=this.uploadedFilesCountContainer,e=Number(t.textContent);t.textContent=e+1}appendValidFile({name:t},e){this.uploadedFilesContainer.innerHTML+=(0,l.v4)(t,e),this.incrementFilesCount()}appendInvalidFile({name:t},e){this.uploadedFilesContainer.innerHTML+=(0,l.zR)(t,e),this.incrementFilesCount()}reset(t){this.uploadedFilesContainer.innerHTML="",this.uploadedFilesCountContainer.textContent=0,this.toggler.hide(),super.reset(t)}#n(){const t=this.label.nextElementSibling,e=document.createElement("div");e.classList.add("uploaded-files","toggler","hidden");const n=document.createElement("button");n.type="button",n.classList.add("title","uploaded-files__title");const i=document.createElement("span");i.classList.add("uploaded-files__count"),i.textContent=0,n.append(i),i.insertAdjacentHTML("beforebegin","Завантажені файли ("),i.insertAdjacentHTML("afterend",') <i class="caret fas fa-angle-down"></i>');const s=document.createElement("div");s.classList.add("content","uploaded-files__info"),e.append(n),e.append(s),t.after(e),this.uploadedFilesContainer=s,this.uploadedFilesCountContainer=i,this.toggler=new D(e),this.toggler.title.addEventListener("click",(()=>this.toggler.slideToggle()))}}var k=n(9388);class H extends k.Z{constructor(t){super(t,"loader")}}const K=new H(document.querySelector(".loader"));function X(t,e=":"){return new Promise(((n,i)=>{const s=t.map(((t,n)=>{const s=n+1;t.includes(e)||i(l.Zj.NO_SEPARATOR_IN_ROW(e,s));const[a,o]=t.split(e),c=a.trim().replaceAll(",","");c||i(l.Zj.NO_WORD_IN_ROW(s));const d=o.trim();d||i(l.Zj.NO_TRANSLATES_IN_ROW(s));const u=d.split(",").map((t=>t.trim())).filter(Boolean);return u.includes(c)&&i(l.Zj.WORD_AND_TRANSLATE_ARE_SAME(s)),(0,r.el)(u).length!==u.length&&i(l.Zj.TRANSLATES_ARE_SAME(s)),{word:c,translates:u}}));n(s)}))}const j=["dragenter","dragover"],P=["dragleave","drop"];function U(){this.classList.add("dragged-over")}function B(){this.classList.remove("dragged-over")}function G(t,e){document.querySelectorAll(".file-input-label").forEach((n=>{n.addEventListener(t,(0,r.Ds)(e,100))}))}const W=function(){j.forEach((t=>G(t,U))),P.forEach((t=>G(t,B))),(()=>{const t=i.Z$.fileInput,e=i.Z$.querySelector(".file-input-label"),n=new $(t,e),c=[],d=t=>{c.length=0,n.reset(t)},u=async()=>{const t=(0,r.ZN)(i.Z$.groups),e=(0,l.sb)(t,c.length);(0,r.vX)(e,(()=>{K.open(),setTimeout((()=>{const e=c.map((e=>({...e,group:t})));s.T.addManyAsync(e).then((()=>s.T.print())).finally((()=>{s.T.save(),K.close()})),(0,r.Fx)(i.Z$),d(),(0,a.K)()}),500)}))};t.addEventListener("change",(t=>{const e=[...t.target.files];e.length?(async t=>{let e=0;const s=(0,r.ZN)(i.Z$.separators);for(const i of t)try{const{extension:t}=(0,r.x2)(i.name);if("txt"!==t)throw l.Zj.WRONG_FILE_EXTENSION;const a=await(0,r.vZ)(i);if(!a.trim())throw l.Zj.EMPTY_FILE;if(a.includes("***"))throw l.Zj.TEMPLATE_LOAD;const o=a.replace(/\r/g,"").split("\n").filter((t=>t.trim())),d=await X(o,s);c.push(...d),n.appendValidFile(i,d.length),e++}catch(t){n.appendInvalidFile(i,t)}return e})(e).then((t=>{n.toggler.hide(),c.length>0?n.setValid(o.NX.SUCCESSFULL_LOAD(t,e.length)):n.setInvalid(o.NX.TEMPLATE_MISMATCH_ERROR)})).finally((()=>n.toggler.show())):d(o.NX.LOAD_CANCELED)})),i.Z$.querySelector("#import-txt-file-reset").addEventListener("click",(()=>n.resetConfirm(d))),i.Z$.addEventListener("submit",(t=>{(0,r.mv)(t.target,u)}))})(),document.querySelector("#download-txt-template").addEventListener("click",M)};function V(){(0,i.cI)(),F(),i.$w.addEventListener("submit",q),W(),i.ow.addEventListener("input",(0,r.Ds)(d,100)),i.ow.addEventListener("submit",h),i.wT.addEventListener("submit",m)}}}]);