"use strict";(self.webpackChunkquiz_game_new=self.webpackChunkquiz_game_new||[]).push([[760],{3760:(t,e,n)=>{n.r(e),n.d(e,{initForms:()=>Ct});var s=n(1597),i=n(3658);class o{#t;#e;static variants={"quess-word":(t,e)=>({innerHTML:`Відтворіть слово по перекладах <b class="text-accent">${e.join(", ")}</b>:`,answers:[t]}),"guess-translation":(t,e)=>({innerHTML:`Введіть один з перекладів слова <b class="text-accent">${t}</b>:`,answers:e})};constructor(t,e={}){const{word:n,translations:s}=e,a=Object.keys(o.variants),r=a.includes(t)?t:(0,i.Li)(a),c=o.variants[r],{innerHTML:l,answers:u}=c(n,s);this.#t=l,this.#e=u}getText=()=>this.#t;checkAnswer=t=>this.#e.includes(t);getAnswers=()=>this.#e.join(", ")}var a=n(790),r=n(796),c=n(6117),l=n(5745);class u{#n=[];constructor(t){this.#n.push(t)}isEmpty(){return 0===this.#n.length}push(t){this.#n.push(t)}pop(){return this.#n.pop()}top(){return this.#n.at(-1)}}const d=document.querySelector(".app__header .arrow__back"),h={canGoBack:!0},p=new class{#s;#i;constructor(t){this.#s=new u(t),this.#i=["quiz-input-answer"],document.addEventListener("click",(t=>{const e=t.target.closest("[data-page-button]");e&&(a.W.isOpen()&&a.W.close(),this.goToPage(e.dataset.pageButton))})),d.addEventListener("click",this.goToPreviousPage)}setPageTitle=t=>{document.querySelector("[data-main-title]").textContent=t};setPageSubtitle=t=>{document.querySelector("[data-main-subtitle]").textContent=t||"найкраща програма для якісного вивчення слів"};showBackButton=t=>{"main"!==t?d.classList.add("open"):d.classList.remove("open"),this.#s.top()!==t&&this.#s.push(t)};showOnlyPage=t=>{document.querySelectorAll(".page").forEach((e=>{e.dataset.page===t?(e.classList.add("open"),this.setPageTitle(e.dataset.title),this.setPageSubtitle(e.dataset.subtitle)):e.classList.remove("open")}))};goToPage=t=>{(0,i.k3)(),this.showBackButton(t),this.showOnlyPage(t)};goToPreviousPage=()=>{if(!h.canGoBack)return;const t=this.#s;t.pop(),this.#i.includes(t.top())&&t.pop(),t.isEmpty()||this.goToPage(t.top())}}("main");function g(){h.canGoBack=!0,d.removeEventListener("click",m),p.goToPreviousPage()}function m(){(0,i.vX)(c.nS,(()=>{g()}))}function f(t,{text:e,replaceClasses:n}){t.textContent=e,t.classList.replace(n.from,n.to)}function v(t){f(t,{text:"Завершити спробу",replaceClasses:{from:c.Yu.buttonSecondary,to:c.Yu.buttonPrimary}})}class w{#o;#a;static quizId=1;constructor({mode:t=c.SX.inputAnswer,group:e,questionsCount:n,form:s}){this.#a=e,this.#o=t,this.form=s,this.submitButton=s.querySelector("[type=submit]"),1===n?v(this.submitButton):f(this.submitButton,{text:"Наступне питання",replaceClasses:{from:c.Yu.buttonPrimary,to:c.Yu.buttonSecondary}}),this.questionsCount=n,this.questions=function*(t,e){const n=l.T.getGroupContent(t),s=(0,i.TV)(n);for(let t=0;t<e;t++)yield s[t]}(e,n),this.correctAnswersCount=0,this.answeredQuestionsCount=0,this.options={questionGuessType:r.YM.questionGuessType?"":"guess-translation",isAnswerInstantlyChecked:r.YM.isAnswerInstantlyChecked},h.canGoBack=!1,d.addEventListener("click",m)}getName(){return`Опитування ${w.quizId}`}getMode=()=>this.#o;getGroup=()=>this.#a;nextQuestion(){const{value:t,done:e}=this.questions.next();return e?this.showResult():(this.answeredQuestionsCount===this.questionsCount-1&&v(this.submitButton),this.answeredQuestionsCount++,new o(this.options.questionGuessType,t))}showResult(){const t=function(){const t=a.W.dialogItems.cancelButton;return t.classList.add("hidden"),()=>{g(),setTimeout((()=>t.classList.remove("hidden")))}}();a.W.addEventListener("close",t),this.form.onsubmit=null;const e=(0,c.Wl)(this.correctAnswersCount,this.questionsCount);(0,i.vX)(e,(()=>{g(),a.W.removeEventListener("close",t)}))}}function T(t){const{value:e,max:n,step:s=1}=t,i=e+s,o=i/n*100;t.value=i,t.style.setProperty(c.yf,`${o}%`)}class L extends w{constructor(t){var e,n;super(t),this.progressBar=this.form.querySelector(".progress"),e=this.progressBar,n=this.questionsCount,e.value=0,e.style.setProperty(c.yf,"0%"),e.max=n,setTimeout((()=>T(e)),100)}nextQuestion(t={}){const e=super.nextQuestion(),{skipProgressIncrement:n=!1}=t;return n||T(this.progressBar),e}}class b{#r=[];#c;constructor(t){this.#c=t}saveQuestionDetails(t,e){const{getText:n,getAnswers:s,checkAnswer:i}=t,o={name:n(),userAnswer:e||"(не введено)",correctAnswer:s(),isAnswerCorrect:i(e)};this.#r.push(o)}getQuizDetails(){const{getName:t,getMode:e,getGroup:n,options:s}=this.#c;return{name:t(),mode:e(),group:n()||"Всі розділи",questions:this.#r,options:s}}}var y=n(3112);function _(t){t.parentElement.classList.remove("answer-correct","answer-wrong")}const E=(0,i.Ds)(((t,e)=>{!function(t,e){t.parentElement.classList.add("answer-"+(e?"correct":"wrong"))}(t,e),setTimeout((()=>_(t)),1e3)}),200);class S extends L{#l;constructor(t){super(t),this.form.onsubmit=this.nextQuestion.bind(this),this.questionContainer=this.form.querySelector("[data-question]"),this.userAnswerInput=this.form.querySelector("[data-answer]"),this.previousQuestion=super.nextQuestion({skipProgressIncrement:!0}),(0,i.TL)(this.userAnswerInput),setTimeout((()=>this.userAnswerInput.focus())),this.#u(),this.#l=new b(this)}nextQuestion(){const t=this.userAnswerInput.value,e=this.previousQuestion.checkAnswer(t);e&&this.correctAnswersCount++,this.options.isAnswerInstantlyChecked&&(_(this.userAnswerInput),E(this.userAnswerInput,e)),this.#l.saveQuestionDetails(this.previousQuestion,t);const n=super.nextQuestion();this.previousQuestion=n,n&&(this.#u(),(0,i.TL)(this.userAnswerInput),this.userAnswerInput.focus())}showResult(){super.showResult();const t=this.#l.getQuizDetails();(0,y.Tx)(t),w.quizId++,s.D.resultName.value=this.getName()}#u(){this.questionContainer.innerHTML=this.previousQuestion.getText()}}var x=n(8060),C=n(2048);const q=s.D.groups;function A(){const t=(0,i.ZN)(q),e=l.T.getGroupContent(t);!function(t){0===t.length?(0,C.KB)(q,"Вибраний розділ не містить жодного слова!"):(0,C.TK)(q)}(e),(0,x.T)(e.length)}function k(){if(l.T.isEmpty())return(0,C.KB)(q,"Словник порожній!");const t=document.querySelector("#quiz-input-answer-words-count"),e=Number(t.value)||1,n=(0,i.ZN)(q),o={mode:c.SX.inputAnswer,group:n,form:s.vs,questionsCount:e};new S(o),p.goToPage("quiz-input-answer")}function I(t){(0,i.mv)(t.target,k)}var O=n(3845);const P=s.ow.group;function M(){const t=P.value.trim(),{EMPTY_INPUT:e,GROUP_ALREADY_EXISTS:n}=C.dc;t?l.T.groups.includes(t)?(0,C.KB)(P,n(t)):(0,C.TK)(P):(0,C.KB)(P,e)}function N(){const t=P.value.trim(),e=(0,c.Pj)(t);(0,i.vX)(e,(()=>function(t){l.T.addGroup(t),l.T.save(),(0,i.Fx)(s.ow),(0,O.K)()}(t)))}function B(t){(0,i.mv)(t.target,N)}function D(){const t=(0,i.ZN)(s.wT.groups),e=(0,c.XD)(t);(0,i.vX)(e,(()=>function(t){l.T.removeGroup(t),l.T.print(),l.T.save(),(0,i.Fx)(s.wT),(0,O.K)()}(t)))}function Z(t){(0,i.mv)(t.target,D)}const{EMPTY_INPUT:F,CONTAINS_COMMA:R,SAME_INPUT_VALUES:Q}=C.vG;function $(t){const e=[t.word,...t.querySelectorAll('[name="translation"]')],n=e.map((t=>t.value)).filter(Boolean).reduce(((t,e)=>(t[e]=t[e]+1||1,t)),{});e.forEach((t=>function(t,e){const n=t.value.trim(),s=t.form.word,i="word"===t.name;n?n.includes(",")?(0,C.KB)(t,R(i)):e>1?(0,C.KB)(t,Q(s.value===n)):(0,C.TK)(t):(0,C.KB)(t,F(i))}(t,n[t.value])))}const G={id:1,count:1},H=document.querySelector("#add-translation-reset"),W=document.querySelector(".additional__translations-container");function X(){const t=s.O_.querySelector('[name="translation"]');G.id=1,G.count=1,(0,i.TL)(t),(0,C.zS)(s.O_,"[data-reset]"),(0,i.yy)(W),(0,i.RM)(G.count)}function z(){const t=s.O_.word,e=s.O_.querySelectorAll('[name="translation"]'),n=s.O_.groups,o=t.value.trim(),a=Array.from(e,(t=>t.value.trim())),r=(0,i.ZN)(n).trim(),u=(0,c.ib)(o,a,r);(0,i.vX)(u,(()=>{l.T.addOne({word:o,translations:a,group:r}),l.T.print(),l.T.save(),(0,i.Fx)(s.O_),(0,O.K)()}))}function K(t){"text"===t.target.type&&$(s.O_)}function j(t){(0,i.mv)(t.target,z)}H.addEventListener("click",(function(){(0,i.vX)(c.ai,X)}));const U=document.querySelector(".additional__translations-container");function Y(){const t=`\n        <label class="form__label row" data-delete-id="${G.id+1}">\n            <span class="control-icon">\n                <i class="input-delete fa-solid fa-trash"></i>\n            </span>\n            <input type="text" class="text-input" name="translation" placeholder="Переклад" maxlength="40" required>\n            <small class="feedbacks">\n                <span class="feedback valid">Переклад введено правильно!</span>\n                <span class="feedback invalid" data-default-feedback="Введіть переклад!">Введіть переклад!</span>\n            </small>\n        </label>\n    `;G.id++,G.count++,U.insertAdjacentHTML("beforeend",t),U.lastElementChild.focus(),(0,i.RM)(G.count)}const V=document.querySelector(".translations__container");function J(t){t.target.classList.contains("input-delete")&&function(t){(0,i.vX)(c.BT,(()=>{var e;e=t.target.dataset.deleteId,s.O_.querySelector(`[data-delete-id='${e}']`).remove(),G.count--,(0,i.RM)(G.count),$(s.O_)}))}(t)}var tt=n(7555);const et=function(){s.O_.addEventListener("input",(0,i.Ds)(K,100)),s.O_.addEventListener("submit",j),s.O_.addEventListener("reset",X),document.querySelector("#add-translation").addEventListener("click",Y),V.addEventListener("click",J),(0,tt.H)()};function nt(){l.T.isEmpty()||(l.T.clear(),(0,O.K)())}function st(){(0,i.vX)(c.ft,nt)}function it(t){(0,i.mv)(t.target,st)}const ot=async()=>{const t=await(0,i.xu)("import-templates/text.txt"),{text:e,separator:n}=(t=>{const e=(0,i.ZN)(s.Z$.separators);return{separator:e,text:t.replaceAll("&",e)}})(t),o=`*** Це шаблон коректного словника з вибраним роздільником ${n}\n*** Якщо хочете завантажити цей шаблон у словник, то видаліть текст із зірочками на початку\n*** [слово] ${n} [переклад1], [переклад2], ...\n${e}`;(0,i.WH)("template",o)};class at{constructor(t,e){this.input=t,this.label=e,this.setInvalid()}setValid(t="Все добре!"){(0,C.TK)(this.input,t,this.label.nextElementSibling),this.label.classList.replace("invalid","valid")}setInvalid(t="Завантажте текстовий файл!"){(0,C.KB)(this.input,t,this.label.nextElementSibling),this.label.classList.replace("valid","invalid")}reset(t){(0,i.TL)(this.input),this.setInvalid(t)}resetConfirm(t){(0,i.vX)(c.Wx,t)}}class rt{constructor(t){this.container=t,this.title=this.container.querySelector(".title"),this.content=this.container.querySelector(".content"),this.content.style.height=0}hide(){this.container.classList.add("hidden"),this.slideUp()}show(){this.container.classList.remove("hidden")}isOpen(){return this.container.classList.contains("open")}slideToggle(){this.isOpen()?this.slideUp():this.slideDown()}slideDown(){if(!this.content.children.length)return;this.container.classList.add("open");const t=`${this.#d()}px`;this.content.style.height=t,this.content.animate([{height:0},{height:t}],{duration:this.#h()})}slideUp(){this.container.classList.remove("open"),this.content.style.height=0,this.content.animate([{height:`${this.#d()}px`},{height:0}],{duration:this.#h()})}#d(){const t=this.content.children,e=t.length;return e?t[0].offsetHeight*e:0}#h(){return 300+this.#d()/(this.content.children.length+1)}}var ct=n(9388);class lt extends ct.Z{constructor(t){super(t,"loader")}}const ut=new lt(document.querySelector(".loader"));function dt(t,e=":"){return new Promise(((n,s)=>{const o=t.map(((t,n)=>{const o=n+1;t.includes(e)||s(c.Zj.NO_SEPARATOR_IN_ROW(e,o));const[a,r]=t.split(e),l=a.trim().replaceAll(",","");l||s(c.Zj.NO_WORD_IN_ROW(o));const u=r.trim();u||s(c.Zj.NO_translationS_IN_ROW(o));const d=u.split(",").map((t=>t.trim())).filter(Boolean);return d.includes(l)&&s(c.Zj.WORD_AND_translation_ARE_SAME(o)),(0,i.el)(d).length!==d.length&&s(c.Zj.translationS_ARE_SAME(o)),{word:l,translations:d}}));n(o)}))}const ht=s.Z$.fileInput,pt=s.Z$.querySelector(".file-input-label"),gt=new class extends at{constructor(t,e){super(t,e),this.#p()}incrementFilesCount(){const t=this.uploadedFilesCountContainer,e=Number(t.textContent);t.textContent=e+1}appendValidFile({name:t},e){this.uploadedFilesContainer.innerHTML+=(0,c.v4)(t,e),this.incrementFilesCount()}appendInvalidFile({name:t},e){this.uploadedFilesContainer.innerHTML+=(0,c.zR)(t,e),this.incrementFilesCount()}reset(t){this.uploadedFilesContainer.innerHTML="",this.uploadedFilesCountContainer.textContent=0,this.toggler.hide(),super.reset(t)}#p(){const t=this.label.nextElementSibling,e=document.createElement("div");e.classList.add("uploaded-files","toggler","hidden");const n=document.createElement("button");n.type="button",n.classList.add("title","uploaded-files__title");const s=document.createElement("span");s.classList.add("uploaded-files__count"),s.textContent=0,n.append(s),s.insertAdjacentHTML("beforebegin","Завантажені файли ("),s.insertAdjacentHTML("afterend",') <i class="caret fas fa-angle-down"></i>');const i=document.createElement("div");i.classList.add("content","uploaded-files__info"),e.append(n),e.append(i),t.after(e),this.uploadedFilesContainer=i,this.uploadedFilesCountContainer=s,this.toggler=new rt(e),this.toggler.title.addEventListener("click",(()=>this.toggler.slideToggle()))}}(ht,pt),mt=[];function ft(t){mt.length=0,gt.reset(t)}async function vt(){const t=(0,i.ZN)(s.Z$.groups),e=(0,c.sb)(t,mt.length);(0,i.vX)(e,(()=>{ut.open(),setTimeout((()=>{const e=mt.map((e=>({...e,group:t})));l.T.addManyAsync(e).then((()=>l.T.print())).finally((()=>{l.T.save(),ut.close()})),(0,i.Fx)(s.Z$),ft(),(0,O.K)()}),500)}))}function wt(t){(0,i.mv)(t.target,vt)}function Tt(t){const e=[...t.target.files];if(!e.length)return ft(C.NX.LOAD_CANCELED);(async function(t){const e=(0,i.ZN)(s.Z$.separators);for(const n of t)try{const{extension:t}=(0,i.x2)(n.name);if("txt"!==t)throw c.Zj.WRONG_FILE_EXTENSION;const s=await(0,i.vZ)(n);if(!s.trim())throw c.Zj.EMPTY_FILE;if(s.includes("***"))throw c.Zj.TEMPLATE_LOAD;const o=s.replace(/\r/g,"").split("\n").filter((t=>t.trim())),a=await dt(o,e);mt.push(...a),gt.appendValidFile(n,a.length)}catch(t){gt.appendInvalidFile(n,t)}})(e).then((()=>{gt.toggler.hide(),mt.length>0?gt.setValid(C.NX.SUCCESSFULL_LOAD):gt.setInvalid(C.NX.TEMPLATE_MISMATCH_ERROR)})).finally((()=>gt.toggler.show()))}const Lt=["dragenter","dragover"],bt=["dragleave","drop"];function yt(){this.classList.add("dragged-over")}function _t(){this.classList.remove("dragged-over")}function Et(t,e){document.querySelectorAll(".file-input-label").forEach((n=>{n.addEventListener(t,(0,i.Ds)(e,100))}))}const St=function(){Lt.forEach((t=>Et(t,yt))),bt.forEach((t=>Et(t,_t))),s.Z$.querySelector("#import-txt-file-reset").addEventListener("click",(()=>gt.resetConfirm(ft))),ht.addEventListener("change",Tt),s.Z$.addEventListener("submit",wt),document.querySelector("#download-txt-template").addEventListener("click",ot)},xt=function(){et(),s.$w.addEventListener("submit",it),St(),s.ow.addEventListener("input",(0,i.Ds)(M,100)),s.ow.addEventListener("submit",B),s.wT.addEventListener("submit",Z)};function Ct(){(0,s.Mo)(),q.addEventListener("change",A),s.D.addEventListener("submit",I),xt()}},8740:(t,e,n)=>{n.d(e,{x:()=>c});var s=n(9085),i=n(7028),o=n(3148),a=n(3658);o.kL.defaults.color=(0,a.ot)("secondary-color");const r=[(0,a.ot)("highlight-success-bg")||"green",(0,a.ot)("highlight-fail-bg")||"red"];function c(t,e={}){const n=document.createElement("canvas"),{isDataLabels:o=!1}=e,c=o?((t,e)=>({type:"doughnut",plugins:[i.Z],data:{datasets:[{data:t,borderWidth:0,backgroundColor:r}],labels:["правильні відповіді","неправильні відповіді"]},options:{plugins:{tooltip:{enabled:!1},datalabels:{labels:{value:{color:(0,a.ot)("white-color")}}},legend:{display:!0,align:"center",position:"bottom",labels:{padding:20}}},responsive:!0,offset:5}}))(t):(t=>({type:"doughnut",data:{datasets:[{data:t,borderWidth:0,backgroundColor:r}]},options:{plugins:{tooltip:{enabled:!1}},layout:{padding:{top:-10,bottom:-10}},offset:2}}))(t);return new s.ZP(n,c)}},3112:(t,e,n)=>{n.d(e,{EU:()=>a,Tx:()=>r});var s=n(8740),i=n(6117);let o=0;function a(t){const e=t.length,n=t.reduce(((t,e)=>t+e.isAnswerCorrect),0);return[n,e-n]}function r(t){i.J1.push(t),function(t){const e=document.querySelector("[data-quiz-result-list]");e.querySelector(".placeholder")?.remove();const n=function(t,e){const{name:n,questions:i}=t,{canvas:o}=(0,s.x)(a(i)),r=document.createElement("div");r.classList.add("result__item");const c=document.createElement("div");c.classList.add("item__chart-container"),c.appendChild(o);const l=`\n        <div class="item__short-description">\n            <span class="item__name">${n}</span>\n            <small\n                class="link text-accent"\n                data-page-button="quiz-details"\n                data-details-id="${e}"\n            >\n                Детальніше...\n            </small>\n        </div>\n    `;return r.insertAdjacentHTML("afterbegin",l),r.appendChild(c),r}(t,o);o++,e.append(n)}(t)}}}]);