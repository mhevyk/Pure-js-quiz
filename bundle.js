(()=>{"use strict";class t{constructor(){this.data=[]}push=t=>{this.data.push(t)};pop=()=>this.data.pop();top=()=>this.data.at(-1)}class e{static#t;constructor(n="main"){if(e.#t)return e.#t;this.pageStack=new t,this.pageStack.push(n),this.navigateHandler=t=>this.goToPage(t.dataset.page),this.backButton=document.querySelector(".app__header .arrow__back"),this.update(),e.#t=this}update=()=>{this.linkButtons=document.querySelectorAll(".page-open-button"),this.backButton.addEventListener("click",this.goToPreviousPage),this.linkButtons.forEach((t=>{t.addEventListener("click",(()=>this.goToPage(t.dataset.page)))}))};setPageTitle=t=>{document.querySelector(".app__header .header__title").textContent=t};showBackButton=t=>{"main"!==t?this.backButton.classList.add("open"):this.backButton.classList.remove("open"),this.pageStack.top()!==t&&this.pageStack.push(t)};showOnlyPage=t=>{document.querySelectorAll(".page").forEach((e=>{e.dataset.page===t?(e.classList.add("open"),this.setPageTitle(e.dataset.title)):e.classList.remove("open")}))};goToPage=t=>{this.showBackButton(t),this.showOnlyPage(t)};goToPreviousPage=()=>{this.pageStack.pop(),this.goToPage(this.pageStack.top())}}const n=[{show:()=>{const t=document.querySelector(".form__quiz-input-answer");t.classList.remove("open"),t.parentElement.querySelector(".placeholder").classList.remove("hide")},hide:()=>{const t=document.querySelector(".form__quiz-input-answer");t.classList.add("open"),t.parentElement.querySelector(".placeholder").classList.add("hide")}},{show:()=>{(new y).container.innerHTML="<div class='placeholder vocabulary__placeholder'>\n                Додайте слова до словника, щоб почати їх вивчення!\n            </div>"},hide:()=>{(new y).container.innerHTML=""}}],s=()=>{(()=>{const t=document.querySelectorAll('.select[data-content="groups"]'),e=new y;t.forEach((t=>{const{disableDefaultOption:n,defaultOptionText:s}=t.dataset,a=void 0!==n,i=((t,{isFirstOptionDisabled:e,defaultOptionText:n})=>`<option value='' selected ${e?"disabled":""}>${n}</option>`+t.map((t=>`<option value='${t}'>${t}</option>`)).join(""))(e.groups,{isFirstOptionDisabled:a,defaultOptionText:s||"Виберіть розділ"});t.innerHTML=i}))})(),(()=>{const t=document.querySelector("#quiz-input-answer-words-count"),e=t.nextElementSibling,n=(new y).data.length,s=Math.ceil(n/5);t.max=n,t.value=s,e.textContent=s})()};class a{constructor(t,e){this.container=t,this.type=e}isOpen=()=>this.container.classList.contains("open");open(){document.body.classList.add("show-overlay",`${this.type}-open`),this.isOpen()||(this.container.parentElement.classList.add("open"),this.container.classList.add("open"))}close(){document.body.classList.remove("show-overlay",`${this.type}-open`),this.isOpen()&&(this.container.parentElement.classList.remove("open"),this.container.classList.remove("open"))}toggle=()=>{this.isOpen()?this.close():this.open()}}class i extends a{static#t;static#e=[];static#n={open:new CustomEvent("open"),close:new CustomEvent("close"),submit:new CustomEvent("submit")};static#s(t,e){e in i.#n&&t.dispatchEvent(i.#n[e])}constructor(t=document.querySelector(".dialog")){if(super(t,"dialog"),i.#t)return i.#t;this.dialogItems={buttons:{closeButton:this.container.querySelector('[data-role="close"]'),cancelButton:this.container.querySelector('[data-role="cancel"]'),submitButton:this.container.querySelector('[data-role="submit"]')},headerSection:this.container.querySelector(".dialog__header h2"),bodySection:this.container.querySelector(".dialog__body")};const{closeButton:e,cancelButton:n,submitButton:s}=this.dialogItems.buttons;e.addEventListener("click",this.close.bind(this)),n.addEventListener("click",this.close.bind(this)),s.addEventListener("click",i.#s.bind(this,this.container,"submit")),i.#t=this}addEventListener=(...t)=>{i.#e.push({name:t[0],fn:t[1]}),this.container.addEventListener(...t)};removeEventListener=(...t)=>{this.container.removeEventListener(...t)};resetEventListeners=()=>{i.#e.forEach((({name:t,fn:e})=>{this.container.removeEventListener(t,e)})),i.#e=[]};header=t=>{const{headerSection:e}=this.dialogItems;e.innerHTML=t};body=t=>{const{bodySection:e}=this.dialogItems;e.innerHTML=t};submitBtn=t=>{const{submitButton:e}=this.dialogItems.buttons;e.textContent=t};cancelBtn=t=>{const{cancelButton:e}=this.dialogItems.buttons;e.textContent=t};open=()=>{i.#s(this.container,"open"),super.open()};close=()=>{i.#s(this.container,"close"),this.resetEventListeners(),super.close()}}const o=(t,e,n=t.parentElement)=>{t.setCustomValidity(""),n.querySelector(".valid").innerHTML=e},r=(t,e,n=t.parentElement)=>{t.setCustomValidity(e),n.querySelector(".invalid").innerHTML=e},l=(t,e="[data-default-feedback]")=>{t.querySelectorAll(e).forEach((t=>t.textContent=t.dataset.defaultFeedback))},c=t=>[...new Set(t)],d=t=>t.value=null,u=t=>t.options[t.selectedIndex].value,h=(t,e)=>{t.checkValidity()&&e()},p=t=>{const e=document.querySelector(".form__add-single-word .translates__count"),n=document.querySelectorAll('.form__add-single-word [name="translate"]');e.textContent=t??n.length},m=t=>{t.classList.remove("validated"),t.reset(),l(t)},g=({header:t="",body:e="",submitBtn:n="ОК",cancelBtn:s="Скасувати"},a)=>{const o=new i;o.header(t),o.body(e),o.submitBtn(n),o.cancelBtn(s),o.open(),o.addEventListener("submit",(()=>{a(),o.close()}))},v=t=>new Promise(((e,n)=>{const s=new FileReader;s.onload=()=>e(s.result),s.onerror=n,s.readAsText(t)})),b=t=>{const e=t.lastIndexOf(".");return{rawName:t.substring(0,e),extension:t.substring(e+1,t.length)}};class y{static#t;constructor(t=document.querySelector(".vocabulary")){if(y.#t)return y.#t;this.container=t,this.groups=[],this.data=[],this.props={groups:!0},y.#t=this,this.print()}getProp=t=>this.props[t];setProp=(t,e)=>{this.props[t]=e};indexOf=t=>this.data.findIndex((e=>e.word===t));addOne=({word:t,translates:e,group:n})=>{const s=this.indexOf(t);-1===s?(this.data.push({word:t,translates:e,group:n}),this.addGroup(n)):this.#a(s,e)};addMany=t=>{t.forEach((t=>this.addOne(t))),this.save()};addManyAsync=t=>Promise.resolve(this.addMany(t));delete=t=>{const e=this.indexOf(t);return-1!==e&&(this.data.splice(e,1),!0)};getGroupContent=t=>this.data.filter((e=>e.group===t));addGroup=t=>{this.groups.includes(t)||this.groups.push(t)};removeGroup=t=>{const e=this.groups.indexOf(t);return-1!==e&&(this.groups.splice(e,1),this.data=this.data.filter((e=>e.group!==t)),!0)};addTranslates=(t,e)=>{const n=this.indexOf(t);-1!==n&&this.#a(n,e)};#a=(t,e)=>{e=Array.isArray(e)?e:[e],this.data[t].translates.push(...e),this.data[t].translates=c(this.data[t].translates)};#i=t=>{this.container.innerHTML+=`\n            <div class='vocabulary__group'>\n                <div class='record__index'></div>\n                <div class='record__item'>${t}</div>\n            </div>\n        `};#o=(t,e)=>{const n=t.split(".").at(-1);this.container.innerHTML+=`\n            <div class="vocabulary__record${n%2?" strip":""}">\n                <div class='record__item record__index'>${t}</div>\n                <div class='record__item record__word'>${e.word}</div>\n                <div class='record__item record__translates'>${e.translates.join(", ")}</div>\n            </div>\n        `};#r=(t,e="")=>{t.forEach(((t,n)=>{this.#o(`${e}${n+1}`,t)}))};print=()=>{if((t=>{for(const e of n)e[t]()})(this.data.length?"hide":"show"),this.props.groups){let t=1;this.groups.forEach((e=>{const n=this.getGroupContent(e);n.length&&(this.#i(e),this.#r(n,`${t}.`),t++)}))}else this.#r(this.data)};load=()=>{const t=localStorage.getItem("vocabularyAppData");if(t){const{data:e,props:n,groups:s}=JSON.parse(t);this.data=e,this.props=n,this.groups=s}};save=()=>{const t={data:this.data,props:this.props,groups:this.groups};localStorage.setItem("vocabularyAppData",JSON.stringify(t))};clear=()=>{this.data=[],this.groups=[],this.print(),localStorage.removeItem("vocabularyAppData"),s()}}const f=document.querySelector(".arrow__up"),L={top:0,behavior:"smooth"},w=()=>window.scrollTo(L),_=()=>{window.scrollY>=300?f.classList.add("open"):f.classList.remove("open")},E=t=>{const e=t.target;e.nextElementSibling.textContent=e.value},S=()=>{f.addEventListener("click",w),document.addEventListener("scroll",_),(()=>{const t=document.querySelectorAll(".option-checkbox"),e=t=>{t.nextElementSibling.classList.toggle("active")},n=t=>{e(t.target)};t.forEach((t=>(t=>{t.addEventListener("change",n),t.checked&&e(t),t.nextElementSibling.innerHTML='<i class="fa fa-check" aria-hidden="true"></i>'})(t)))})(),(()=>{const t=document.querySelectorAll(".option-radio"),e=e=>{t.forEach((t=>{const e=t.nextElementSibling;e.classList.remove("active"),e.innerHTML=""}));const n=e.nextElementSibling;n.classList.toggle("active"),n.innerHTML=n.innerHTML.trim()?"":'<i class="fa fa-circle" aria-hidden="true"></i>'},n=t=>{const n=t.target;e(n)};t.forEach((t=>{t.addEventListener("change",n),t.checked&&e(t)}))})(),document.querySelectorAll(".range-input").forEach((t=>(t=>{t.addEventListener("input",E)})(t)))},x={translateIdCounter:0},q=t=>{const e=t.word,n=[e,...t.querySelectorAll('[name="translate"]')],s=n.filter((t=>t.value)).reduce(((t,e)=>{const n=e.value;return t[n]=t?.[n]+1||1,t}),{});for(const t of n){const n=t.value.trim();n?n.includes(",")?r(t,"word"===t.name?"Слово не може містити кому!":"Переклад не може містити кому. Записуйте кожен переклад в окремому полі!"):s[n]>1?r(t,(e.value===n?"Слово та переклад":"Переклади")+" співпадають!"):t.setCustomValidity(""):r(t,"Введіть "+("word"===t.name?"слово!":"переклад!"))}},T=()=>{const t=document.querySelector(".form__add-single-word"),e=document.querySelector(".translates__container");e.addEventListener("click",(e=>{e.target.classList.contains("input-delete")&&(e=>{g({header:"Видалення перекладу",submitBtn:"Так",body:"Справді видалити переклад?",cancelBtn:"Скасувати"},(()=>{var n;n=e.target.dataset.deleteIndex,document.querySelector(`[data-delete-index='${n}']`).remove(),p(),q(t)}))})(e)}))},C=document.querySelector("#add-translate-reset"),$=document.querySelector(".form__add-single-word .additional__translates-container"),B=()=>{const t=document.querySelector(".form__add-single-word"),e=t.querySelector('[name="translate"]');d(e),l(t,"[data-reset]"),x.translateIdCounter=0,$.innerHTML="",p(1)};C.addEventListener("click",(()=>{g({header:"Скидання перекладів",submitBtn:"Так",body:"\n            Справді скинути переклади?\n            <small>Всі переклади крім першого будуть видалені, а вміст першого буде очищено</small>\n        ",cancelBtn:"Скасувати"},B)}));class k{constructor(t,e){this.input=t,this.label=e,this.setInvalid()}setValid=(t="Все добре!")=>{o(this.input,t,this.label.nextElementSibling),this.label.classList.add("valid"),this.label.classList.remove("invalid")};setInvalid=(t="Завантажте текстовий файл!")=>{r(this.input,t,this.label.nextElementSibling),this.label.classList.remove("valid"),this.label.classList.add("invalid")};reset(t){d(this.input),this.setInvalid(t)}resetConfirm=t=>{g({header:"Видалення завантажених файлів",submitBtn:"Так",body:"\n                Справді видалити всі завантажені файли?\n            ",cancelBtn:"Скасувати"},t)}}class A{constructor(t){this.container=t,this.title=this.container.querySelector(".title"),this.content=this.container.querySelector(".content"),this.content.style.height=0}hide=()=>{this.container.classList.add("hidden"),this.slideUp()};show=()=>{this.container.classList.remove("hidden")};isOpen=()=>this.container.classList.contains("open");slideToggle=()=>{this.isOpen()?this.slideUp():this.slideDown()};#l=()=>{const t=this.content.children,e=t.length;return e?t[0].offsetHeight*e:0};#c=()=>300+this.#l()/(this.content.children.length+1);slideDown=()=>{if(!this.content.children.length)return;this.container.classList.add("open");const t=this.#l()+"px";this.content.style.height=t,this.content.animate([{height:0},{height:t}],{duration:this.#c()})};slideUp=()=>{this.container.classList.remove("open"),this.content.style.height=0,this.content.animate([{height:this.#l()+"px"},{height:0}],{duration:this.#c()})}}class M extends k{constructor(t,e){super(t,e),this.#d()}#d=()=>{const t=this.label.nextElementSibling,e=document.createElement("div");e.classList.add("uploaded-files","toggler","hidden");const n=document.createElement("button");n.type="button",n.classList.add("title","uploaded-files__title");const s=document.createElement("span");s.classList.add("uploaded-files__count"),s.textContent=0,n.append(s),s.insertAdjacentHTML("beforebegin","Завантажені файли ("),s.insertAdjacentHTML("afterend",') <i class="caret fas fa-angle-down"></i>');const a=document.createElement("div");a.classList.add("content","uploaded-files__info"),e.append(n),e.append(a),t.after(e),this.uploadedFilesContainer=a,this.uploadedFilesCountContainer=s,this.toggler=new A(e),this.toggler.title.addEventListener("click",(()=>this.toggler.slideToggle()))};reset=t=>{this.uploadedFilesContainer.innerHTML="",this.uploadedFilesCountContainer.textContent=0,this.toggler.hide(),super.reset(t)};incrementFilesCount=()=>{const t=Number(this.uploadedFilesCountContainer.textContent);this.uploadedFilesCountContainer.textContent=t+1};appendValidFile=(t,e)=>{this.uploadedFilesContainer.innerHTML+=`\n            <small class='uploaded__file success'>\n                <i class='icon fa-solid fa-file'></i>\n                Слова з файлу <b>${t.name}</b> готові до додавання у розділ! (Кількість слів: <b>${e}</b>)\n            </small>`,this.incrementFilesCount()};appendInvalidFile=(t,e)=>{this.uploadedFilesContainer.innerHTML+=`\n            <small class='uploaded__file fail'>\n                <i class='icon fa fa-times' aria-hidden='true'></i>\n                Файл <b>${t.name}</b> не був завантажений через помилку: ${e}\n            </small>`,this.incrementFilesCount()}}class I extends a{static#t=!1;constructor(t=document.querySelector(".loader")){if(super(t,"loader"),I.#t)return I.#t;I.#t=this}}const H=(t,e=":")=>new Promise(((n,s)=>{n(t.map(((t,n)=>{const a=n+1;t.includes(e)||s(((t,e)=>`Немає роздільника '${t}' в рядку ${e}`)(e,a));const[i,o]=t.split(e),r=i.trim().replaceAll(",","");r||s((t=>`Відсутнє слово в рядку ${t}!`)(a));const l=o.trim();l||s((t=>`Відсутні переклади в рядку ${t}`)(a));const d=l.split(",").map((t=>t.trim())).filter(Boolean);return d.includes(r)&&s((t=>`Слово та один з перекладів співпадають в рядку ${t}`)(a)),c(d).length!==d.length&&s((t=>`Переклади співпадають в рядку ${t}`)(a)),{word:r,translates:d}})))})),O=()=>{document.querySelectorAll(".form").forEach((t=>{const{colorValidate:e}=t.dataset;void 0!==e&&(t=>{t.addEventListener("submit",(t=>t.target.classList.add("validated")))})(t),(t=>{t.addEventListener("submit",(t=>t.preventDefault()))})(t)})),(()=>{const t=document.querySelector(".form__add-single-word .additional__translates-container");document.querySelector("#add-translate").addEventListener("click",(()=>{const e=`\n            <label class='label row' data-delete-index="${x.translateIdCounter}">\n                <div class='input-delete__container'>\n                    <i class='input-delete fa fa-trash' aria-hidden='true' title='Видалити переклад' data-delete-index='${x.translateIdCounter}'></i>\n                </div>\n                <input type='text' name='translate' placeholder='Переклад' maxlength='40' required>\n                <small class='feedbacks'>\n                    <span class='feedback valid' aria-live='polite'>Переклад введено правильно!</span>\n                    <span class='feedback invalid' data-default-feedback='Введіть переклад!'>Введіть переклад!</span>\n                </small>\n            </label>\n        `;t.insertAdjacentHTML("beforeend",e),x.translateIdCounter++,p()}))})(),T(),(()=>{const t=t=>t.classList.add("dragged-over"),e=t=>t.classList.remove("dragged-over"),n=(t,e)=>{const n=document.querySelectorAll(".file-input-label"),s=t=>e(t);n.forEach((e=>e.addEventListener(t,s)))};["dragenter","dragover"].forEach((e=>n(e,t))),["dragleave","drop"].forEach((t=>n(t,e)))})(),(()=>{const t=document.querySelector(".form__add-group"),e=t.group,n=new y,a=()=>{const a=e.value.trim();g({header:"Додавання розділу",submitBtn:"Додати",cancelBtn:"Скасувати",body:`<span class='text-primary'>Назва розділу:</span> ${a}`},(()=>{n.addGroup(a),n.save(),m(t),s()}))};t.addEventListener("input",(()=>{const t=e.value.trim();t?n.groups.includes(t)?r(e,`Розділ <b>${t}</b> вже існує!`):e.setCustomValidity(""):r(e,"Введіть назву розділу!")})),t.addEventListener("submit",(t=>{const e=t.target;h(e,a)}))})(),(()=>{const t=document.querySelector(".form__add-single-word"),e=()=>{const e=t.word,n=t.querySelectorAll('[name="translate"]'),s=t.groups,a=e.value.trim(),i=Array.from(n,(t=>t.value.trim())),o=u(s).trim(),r={header:"Додавання слова",submitBtn:"Додати",cancelBtn:"Скасувати",body:`\n                <p><span class='text-primary'>Слово:</span> ${a}</p>\n                <p><span class='text-primary'>Переклади:</span> ${i.join(", ")}</p>\n                <p><span class='text-primary'>Розділ:</span> ${o}</p>\n            `};g(r,(()=>{const e=new y;e.addOne({word:a,translates:i,group:o}),e.print(),e.save(),m(t)}))};t.addEventListener("input",(e=>{"INPUT"===e.target.tagName&&q(t)})),t.addEventListener("submit",(t=>{const n=t.target;h(n,e)})),t.addEventListener("reset",B)})(),(()=>{const t=document.querySelector(".form__delete-group"),e=()=>{const e=u(t.groups);g({header:"Видалення розділу",submitBtn:"Видалити",cancelBtn:"Скасувати",body:`<span class='text-primary'>Назва розділу:</span> ${e}`},(()=>{const n=new y;n.removeGroup(e),n.print(),n.save(),m(t),s()}))};t.addEventListener("submit",(t=>{const n=t.target;h(n,e)}))})(),(()=>{const t=document.querySelector(".form__delete-one"),e=t.searchToken,n=new y;let s;const a="Порядковий номер слова має бути більшим за 0!",i=({word:t,translates:e})=>`Знайдено слово <b>${t}</b> з перекладами <b>${e.join(", ")}</b>!`,l={positionWithoutUnit:/[0123456789]+/,positionWithUnit:/(\d+)\.(\d+)/},c=()=>{g({header:"Видалення слова",submitBtn:"Видалити",cancelBtn:"Скасувати",body:`<span class='text-primary'>Слово:</span> ${s}`},(()=>{n.delete(s),n.print(),n.save(),m(t)}))};t.addEventListener("input",(()=>{const t=e.value.toLowerCase().trim();t?l.positionWithUnit.test(t)?(t=>{const[l,c]=t.split(".").map(Number);if(l<=0)return r(e,"Номер групи має бути більшим за 0!");if(c<=0)return r(e,a);if(l>n.groups.length)return r(e,`У словнику тільки <b>${n.groups.length}</b> розділів, а введено розділ <b>${l}</b>!`);const d=n.groups[l-1],u=n.getGroupContent(d);if(c>u.length)return r(e,((t,e,n)=>`У розділі <b>${t}</b> тільки <b>${e}</b> слів, а введено слово під номером <b>${n}</b>!`)(l,u.length,c));const h=u[c-1];o(e,i(h)),s=h.word})(t):l.positionWithoutUnit.test(t)?(t=>{const l=Number(t);if(isNaN(l))return r(e,"Введіть коректний порядковий номер або слово!");if(l<=0)return r(e,a);const c=n.data;if(l>c.length)return r(e,`У словнику тільки <b>${c.length}</b> слів, а введено слово під номером <b>${l}</b>!`);const d=c[l-1];o(e,i(d)),s=d.word})(t):(t=>{const a=n.indexOf(t);if(-1===a)return r(e,"Такого слова немає у словнику!");const l=n.data[a];o(e,i(l)),s=l.word})(t):r(e,"Введіть критерій для пошуку!")})),t.addEventListener("submit",(t=>{const e=t.target;h(e,c)}))})(),(()=>{const t=document.querySelector(".form__import-txt"),n=t.fileInput,s=t.querySelector(".file-input-label"),a=new M(n,s),i=[],o=t=>{i.length=0,a.reset(t)},r=async()=>{const e=u(t.groups),n={header:"Додавання слів до розділу",submitBtn:"Додати",cancelBtn:"Скасувати",body:`\n                <p><span class='text-primary'>Розділ:</span> ${e}</p>\n                <p><span class='text-primary'>Кількість слів:</span> ${i.length}</p>\n            `};g(n,(()=>{const n=new I;n.open(),setTimeout((()=>{const s=new y,a=i.map((t=>({...t,group:e})));s.addManyAsync(a).then((()=>s.print())).finally((()=>{s.save(),n.close()})),m(t),o()}),500)}))};n.addEventListener("change",(n=>{const s=[...n.target.files];s.length?(async e=>{let n=0;const s=u(t.separators);for(const t of e)try{const{extension:e}=b(t.name);if("txt"!==e)throw"Файл не має розширення <b>.txt</b>!";const o=await v(t);if(!o.trim())throw"Вміст файлу порожній!";if(o.includes("***"))throw'Завантаження шаблону! Видаліть рядки із символами "***"!';const r=o.replace(/\r/g,"").split("\n").filter((t=>t.trim())),l=await H(r,s);i.push(...l),a.appendValidFile(t,l.length),n++}catch(e){a.appendInvalidFile(t,e)}return n})(s).then((t=>{a.toggler.hide(),i.length>0?a.setValid(((t,e)=>`Успішно завантажено ${t} з ${e} файлів! Перегляньте деталі у випадаючому списку нижче!`)(t,s.length)):(a.setInvalid('Жоден із завантажених файлів не відповідає <span class="page-open-button link" data-page="vocabulary-group-import-template">шаблону</span>!'),(new e).update())})).finally((()=>a.toggler.show())):o("Завантаження файлів відмінено!")})),t.querySelector("#import-txt-file-reset").addEventListener("click",(()=>a.resetConfirm(o))),t.addEventListener("submit",(t=>{const e=t.target;h(e,r)}))})(),(()=>{const t=document.querySelector(".form__vocabulary-clear"),e=()=>{g({header:"Очищення вмісту словника",submitBtn:"Очистити",cancelBtn:"Скасувати",body:"Справді очистити словник?"},(()=>{const t=new y;t.data.length&&t.clear()}))};t.addEventListener("submit",(t=>{const n=t.target;h(n,e)}))})()};class F{static whatToGuess=["word","translate"];constructor(t,e={mixQuestionType:!0}){this.questionsCount=t,this.questions=function*(t){var e;const n=(e=(new y).data,[...e].sort((()=>.5-Math.random()))).slice(0,t);for(const t of n)yield t}(t),this.options=e,this.rightAnswersCount=0}#u=(t,e)=>({text:`Введіть один з перекладів слова <b>${t}</b>:`,answers:e});#h=(t,e)=>({text:`Відтворіть слово по перекладах <b>${e.join(", ")}</b>:`,answers:[t]});nextQuestion=()=>{const t=this.questions.next();if(t.done)return null;const{mixQuestionType:e}=this.options,n=e?Math.floor(2*Math.random()):0,s=F.whatToGuess[n],{word:a,translates:i}=t.value;switch(s){case"word":return this.#u(a,i);case"translate":return this.#h(a,i)}};showResult=()=>{const t=new i,{cancelButton:n}=t.dialogItems.buttons,s=()=>(new e).goToPreviousPage();t.addEventListener("close",s),n.style.display="none";const a=this.questionsCount,o=this.rightAnswersCount>a/2,r={header:"Результат тестування",body:`\n                <p>Тестування завершено <span class="text-${o?"success":"fail"}">${o?"вдало":"невдало"}</span>, результат: <span class='text-primary'>${this.rightAnswersCount}/${a}</span>!\n                <p><small class='link'>Переглянути результат тестування</small></p>\n            `,submitBtn:"Добре"};g(r,(()=>{t.close(),t.removeEventListener("close",s),setTimeout((()=>n.style.display="block"),500)}))}}const P=()=>{const t=document.querySelector(".form__quiz-input-answer"),e=t.querySelector(".progress"),n=t.answer,s=t.querySelector(".question__text"),a=t.querySelector('button[type="submit"]'),i=document.querySelector("#quiz-input-answer-start");let o,r;const l=()=>{const{value:t,max:n}=e,s=t+1,a=s/n*100;e.value=s,e.style.setProperty("--value",`${a}%`)};i.addEventListener("click",(()=>{if((new y).data.length){d(n);const i=document.querySelector("#quiz-input-answer-words-count"),u=Number(i.value);(e=>{o=new F(e,t),r=o.nextQuestion(),s.innerHTML=r.text,a.classList.add("button__secondary"),a.classList.remove("button__primary"),a.textContent="Наступне питання"})(u),t.addEventListener("submit",c),setTimeout((()=>n.focus())),(t=>{e.value=0,e.style.setProperty("--value","0%"),e.max=t})(u),setTimeout(l,100)}}));const c=()=>{if(r){if(e.value+1===e.max&&(a.classList.remove("button__secondary"),a.classList.add("button__primary"),a.textContent="Завершити спробу"),(t=>{const e=n.value.trim();e&&t.answers.includes(e)&&o.rightAnswersCount++})(r),r=o.nextQuestion(),!r)return t.removeEventListener("submit",c),o.showResult();s.innerHTML=r.text,d(n),n.focus(),l()}}};document.addEventListener("DOMContentLoaded",(()=>{const t=new y;new e,t.load(),t.print(),s(),document.querySelector(".exit").addEventListener("click",(()=>{g({header:"Вихід з програми",body:"Справді вийти із програми?",submitBtn:"Так",cancelBtn:"Скасувати"},(()=>{window.open(location,"_self").close()}))})),(()=>{const t=document.querySelectorAll(".app-existance-date-range"),e=[2019,(new Date).getFullYear()];t.forEach((t=>{const n=e.map((t=>`<time datetime='${t}'>\n                ${t}\n            </time>`));t.innerHTML=n.join("-")}))})(),S(),O(),P()}))})();